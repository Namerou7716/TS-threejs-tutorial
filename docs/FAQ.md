# Three.js TypeScript Tutorial - ã‚ˆãã‚ã‚‹è³ªå•é›†

## ğŸ¯ åŸºæœ¬æ¦‚å¿µ

### Q1: ã‚¯ãƒ©ã‚¹å†…ã«functionã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§é–¢æ•°ã‚’å®£è¨€ã§ããªã„ã®ã¯ãªãœã§ã™ã‹ï¼Ÿ

**A:** JavaScriptã®ã‚¯ãƒ©ã‚¹æ§‹æ–‡ã§ã¯ã€ä»¥ä¸‹ã®ç†ç”±ã«ã‚ˆã‚Š`function`ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã§ãã¾ã›ã‚“ï¼š

#### æ­£ã—ã„æ›¸ãæ–¹
```typescript
class MyClass {
    // âœ… æ­£ã—ã„ - ãƒ¡ã‚½ãƒƒãƒ‰å®šç¾©
    myMethod() {
        return "Hello";
    }
    
    // âœ… æ­£ã—ã„ - ã‚¢ãƒ­ãƒ¼é–¢æ•°ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
    myArrowMethod = () => {
        return "Hello";
    }
    
    // âŒ é–“é•ã„ - functionã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯ä½¿ãˆãªã„
    // function myMethod() { }
}
```

#### è¨­è¨ˆæ€æƒ³ã®èƒŒæ™¯
1. **ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã®ä¸€è²«æ€§**: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ†ãƒ©ãƒ«ã¨åŒã˜æ§‹æ–‡ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¡ç”¨
2. **thisãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã®æ˜ç¢ºåŒ–**: `function`ã¯å‹•çš„ãª`this`ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’æŒã¤ãŸã‚ã€æ··ä¹±ã‚’é¿ã‘ã‚‹
3. **æ§‹æ–‡ã®ç°¡æ½”æ€§**: ä¸€ã¤ã®æ©Ÿèƒ½ã«å¯¾ã—ã¦è¤‡æ•°ã®æ›¸ãæ–¹ã‚’é¿ã‘ã€ã‚³ãƒ¼ãƒ‰ã®ä¸€è²«æ€§ã‚’ä¿ã¤
4. **ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®æœ€é©åŒ–**: æ§‹æ–‡ã‚’åˆ¶é™ã™ã‚‹ã“ã¨ã§ç¢ºå®Ÿãªæœ€é©åŒ–ã‚’å®Ÿç¾

---

## ğŸ¨ DOMæ“ä½œ

### Q2: `document.body.appendChild`ã¯ã©ã®ã‚ˆã†ãªæ©Ÿèƒ½ã§ã™ã‹ï¼Ÿ

**A:** HTMLè¦ç´ ã‚’å‹•çš„ã«ãƒšãƒ¼ã‚¸ã®`<body>`ã®æœ€å¾Œã«è¿½åŠ ã™ã‚‹DOMæ“ä½œãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚

#### åŸºæœ¬çš„ãªä½¿ã„æ–¹
```javascript
// æ–°ã—ã„è¦ç´ ã‚’ä½œæˆ
const newDiv = document.createElement('div');
newDiv.textContent = 'Hello World';

// bodyã®æœ€å¾Œã«è¿½åŠ 
document.body.appendChild(newDiv);
```

#### Three.jsã§ã®å®Ÿéš›ã®ä½¿ç”¨ä¾‹
```typescript
public start(): void {
    // renderer.domElement = canvasè¦ç´ 
    if (!document.body.contains(this.renderer.domElement)) {
        document.body.appendChild(this.renderer.domElement);
    }
    this.animate();
}
```

#### å‹•ä½œ
- **è¿½åŠ ä½ç½®**: `<body>`ã®æœ€å¾Œã®å­è¦ç´ ã¨ã—ã¦è¿½åŠ 
- **æˆ»ã‚Šå€¤**: è¿½åŠ ã—ãŸè¦ç´ ã‚’è¿”ã™
- **æ—¢å­˜è¦ç´ **: æ—¢å­˜ã®è¦ç´ ã‚’åˆ¥ã®å ´æ‰€ã«ç§»å‹•ã•ã›ã‚‹ã“ã¨ã‚‚å¯èƒ½

---

## ğŸ–¼ï¸ Canvasè¦ç´ ã¨ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

### Q3: Rendererã‚„Sceneã«è¨­å®šã—ãŸã‚‚ã®ã‚’è‡ªå‹•ã§HTMLã«è¿½åŠ ã™ã‚‹æ©Ÿèƒ½ã§ã™ã‹ï¼Ÿ

**A:** ã„ã„ãˆã€`appendChild`ã¯**canvasè¦ç´ ã®ã¿**ã‚’HTMLã«è¿½åŠ ã—ã¾ã™ã€‚3Dã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯è‡ªå‹•çš„ã«HTMLã«è¿½åŠ ã•ã‚Œã¾ã›ã‚“ã€‚

#### æ­£ç¢ºãªç†è§£
```javascript
// 1. 3Dã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚·ãƒ¼ãƒ³ã«è¿½åŠ ï¼ˆHTMLè¦ç´ ã§ã¯ãªã„ï¼‰
const cube = new THREE.Mesh(geometry, material);
scene.add(cube);  // â† ã“ã‚Œã¯HTMLã«ã¯è¿½åŠ ã•ã‚Œãªã„

// 2. Canvasè¦ç´ ã‚’HTMLã«è¿½åŠ 
document.body.appendChild(renderer.domElement);  // â† HTMLã«è¿½åŠ ã•ã‚Œã‚‹ã®ã¯canvasè¦ç´ ã®ã¿

// 3. 3Dâ†’2Då¤‰æ›ã—ã¦æç”»
renderer.render(scene, camera);  // â† 3Dã‚·ãƒ¼ãƒ³ã‚’canvasä¸Šã«æç”»
```

#### ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œ
```
3Dã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ â†’ ã‚·ãƒ¼ãƒ³ â†’ ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ â†’ Canvasè¦ç´  â†’ HTMLãƒšãƒ¼ã‚¸
  (scene.add)     (3Dç©ºé–“)   (æç”»å‡¦ç†)   (appendChild)   (è¡¨ç¤º)
```

---

### Q4: Canvasè¦ç´ ã¯3Dé ˜åŸŸã®æç”»ã‚’ã™ã‚‹ã‚¿ã‚°ã§ã™ã‹ï¼Ÿ

**A:** Canvasè¦ç´ ã¯3Dæç”»**ã‚‚**ã§ãã‚‹æ±ç”¨çš„ãªæç”»é ˜åŸŸã§ã™ã€‚3Då°‚ç”¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

#### Canvasè¦ç´ ã®æç”»ç¨®é¡

**1. 2Dæç”»ï¼ˆCanvas 2D APIï¼‰**
```javascript
const ctx = canvas.getContext('2d');
ctx.fillRect(10, 10, 100, 100);  // å››è§’å½¢
ctx.arc(50, 50, 30, 0, 2 * Math.PI);  // å††
```

**2. 3Dæç”»ï¼ˆWebGLï¼‰**
```javascript
const gl = canvas.getContext('webgl');
// è¤‡é›‘ãªWebGLæ“ä½œï¼ˆé€šå¸¸ã¯Three.jsãŒä»£è¡Œï¼‰
```

**3. Three.jsã§ã®3Dæç”»**
```javascript
const renderer = new THREE.WebGLRenderer();
renderer.render(scene, camera);  // 3Dã‚·ãƒ¼ãƒ³ã‚’canvasä¸Šã«æç”»
```

#### Three.jsã«ãŠã‘ã‚‹Canvasè¦ç´ ã®å½¹å‰²
- **ç”Ÿæˆ**: Three.jsãŒè‡ªå‹•çš„ã«canvasè¦ç´ ã‚’ä½œæˆ
- **è¨­å®š**: ã‚µã‚¤ã‚ºã‚„æç”»è¨­å®šã‚’ç®¡ç†
- **æç”»**: 3Dç©ºé–“ã®å†…å®¹ã‚’2Dãƒ”ã‚¯ã‚»ãƒ«ã«å¤‰æ›ã—ã¦è¡¨ç¤º

#### çµè«–
Canvasè¦ç´ ã¯ï¼š
- âœ… 3Dæç”»**ã‚‚**ã§ãã‚‹æ±ç”¨çš„ãªæç”»é ˜åŸŸ
- âœ… 2Dæç”»**ã‚‚**ã§ãã‚‹
- âœ… WebGLã‚’ä½¿ã£ãŸé«˜æ€§èƒ½ãª3Dæç”»ã®åŸºç›¤
- âœ… Three.jsãŒ3Dæç”»ã‚’ç°¡å˜ã«ã—ã¦ãã‚Œã‚‹ã€Œã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã€

---

## ğŸ—‚ï¸ TypeScriptå‹ã‚·ã‚¹ãƒ†ãƒ 

### Q5: `Map<T,T> = new Map();` ã¨ã„ã†æ–‡æ³•ã«ã¤ã„ã¦

**A:** ã“ã®æ–‡æ³•ã¯æ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚æ­£ã—ã„TypeScriptã®æ›¸ãæ–¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

#### æ­£ã—ã„æ›¸ãæ–¹
```typescript
// å¤‰æ•°å®£è¨€ã‚’å«ã‚€å®Œå…¨ãªå½¢
const map: Map<T, T> = new Map();

// ã¾ãŸã¯å‹æ¨è«–ã‚’æ´»ç”¨
const map = new Map<T, T>();
```

#### `Map<T, T>` ã®è§£èª¬
- `Map` - JavaScript/TypeScriptã®çµ„ã¿è¾¼ã¿ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆã‚­ãƒ¼ã¨å€¤ã®ãƒšã‚¢ã‚’æ ¼ç´ï¼‰
- `<T, T>` - ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆã‚­ãƒ¼ã®å‹ã¨å€¤ã®å‹ãŒåŒã˜ `T` å‹ï¼‰
- `T` - ä»»æ„ã®å‹ã‚’è¡¨ã™ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼

#### å®Ÿéš›ã®ä½¿ç”¨ä¾‹
```typescript
// æ–‡å­—åˆ—ã‚’ã‚­ãƒ¼ãƒ»å€¤ã¨ã™ã‚‹Map
const stringMap = new Map<string, string>();
stringMap.set("key", "value");

// æ•°å€¤ã‚’ã‚­ãƒ¼ãƒ»å€¤ã¨ã™ã‚‹Map  
const numberMap = new Map<number, number>();
numberMap.set(1, 100);

// Three.jsã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ã®ä¾‹
private managedObjects: Map<string, THREE.Object3D> = new Map();
```

#### Three.jsã§ã®ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ã¸ã®å¿œç”¨
```typescript
//ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ç”¨ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
private managedObjects : Map<string,THREE.Object3D> = new Map();        //ã‚·ãƒ¼ãƒ³ã«è¿½åŠ ã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’IDã§ç®¡ç†

// ä½¿ç”¨ä¾‹
this.managedObjects.set("cube1", mesh);          // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¿½åŠ 
const cube = this.managedObjects.get("cube1");   // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå–å¾—
this.managedObjects.delete("cube1");             // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‰Šé™¤
```

ã“ã®ä»•çµ„ã¿ã«ã‚ˆã‚Šãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã‚’é˜²ãã€å¤§é‡ã®3Dã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’åŠ¹ç‡çš„ã«ç®¡ç†ã§ãã¾ã™ã€‚

---

## ğŸ’¡ ã¾ã¨ã‚

ã“ã‚Œã‚‰ã®è³ªå•ã¯ã€JavaScript/TypeScriptã®è¨€èªä»•æ§˜ã€DOMæ“ä½œã€ãã—ã¦Three.jsã®æç”»ã‚·ã‚¹ãƒ†ãƒ ã¨ã„ã†3ã¤ã®ç•°ãªã‚‹å±¤ã«ã¾ãŸãŒã‚‹é‡è¦ãªæ¦‚å¿µã§ã™ã€‚ç†è§£ã‚’æ·±ã‚ã‚‹ã“ã¨ã§ã€ã‚ˆã‚ŠåŠ¹æœçš„ãªWeb 3Dé–‹ç™ºãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- [MDN - Canvas API](https://developer.mozilla.org/ja/docs/Web/API/Canvas_API)
- [Three.js å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://threejs.org/docs/)
- [TypeScript å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.typescriptlang.org/docs/)