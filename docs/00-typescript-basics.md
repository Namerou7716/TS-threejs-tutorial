# 00. TypeScript基礎知識 - ハンズオンで学ぶ最初のステップ

## 📖 この章のゴール

この章では、**実際に手を動かしながら**TypeScriptの基本的な考え方と、それがプログラミングをいかに安全で快適にするかを学びます。最終的には、TypeScriptの主要な機能（基本的な型、インターフェース、クラス、ジェネリクス）を使いこなし、**自分自身でシンプルな型安全ライブラリを作成できる**レベルに到達することを目指します。

---

## 🎯 プロジェクト1: 型安全な計算機を作ろう

最初のプロジェクトでは、多くのプログラマーが経験するJavaScriptの「落とし穴」を体験し、それをTypeScriptがいかに華麗に解決してくれるかを見ていきましょう。

### Step 1-1: 問題の体験 - JavaScriptで書くということ

まず、TypeScriptがない世界、つまり素のJavaScriptでコードを書くとどのような問題が起きるのかを体験してみましょう。`calculator.js`というファイルを作成し、2つの数値を足し算したり掛け算したりする、ごく単純な関数を実装します。

```javascript
// calculator.js - JavaScriptの「型」に関する問題点を体験するためのファイル

function add(a, b) {
    // この関数は、aとbが両方とも「数値」であることを期待しています。
    return a + b;
}

function multiply(a, b) {
    return a * b;
}

// --- 実行してみる ---
console.log('--- JavaScriptの問題点デモ ---');

// ✅ ケース1: 期待通りの動作 (数値 + 数値)
console.log(`add(5, 3)       -> ${add(5, 3)}`); // 結果: 8

// ❌ ケース2: 意図しない結果 (文字列 + 数値)
// JavaScriptでは、`+`演算子は文字列連結にも使われます。
// そのため、"5"(文字列)と3(数値)を足すと、"53"(文字列)という予期せぬ結果になります。
console.log(`add("5", 3)     -> "${add("5", 3)}"`); // 結果: "53"

// 🤔 ケース3: たまたま動くが、不安定 (文字列 * 数値)
// `*`演算子は数値計算にしか使われないため、JavaScriptは"2"を自動的に数値の2に変換してくれます。
// これは一見便利ですが、このような「暗黙の型変換」は、時に予期せぬバグの原因となります。
console.log(`multiply("2", 4)  -> ${multiply("2", 4)}`); // 結果: 8

// ❌ ケース4: 実行時エラー
// "hello"は数値に変換できないため、計算結果がNaN（Not a Number: 非数）という特殊な値になります。
// このようなエラーは、プログラムを実行するまで気づくことができません。
console.log(`multiply("hello", 3) -> ${multiply("hello", 3)}`); // 結果: NaN
```

ターミナルで`node calculator.js`を実行して、これらの結果を確認してみてください。

**ここでの課題:** JavaScriptは非常に柔軟ですが、その代償として「型」に対するチェックが緩やかです。`add`関数は数値を期待しているにも関わらず、文字列を渡してもエラーを出しません。このような問題は、プログラムが大きくなるほど追跡が困難なバグの原因となります。

### Step 1-2: 解決策の提示 - TypeScriptによる型安全の導入

次に、先ほどの問題をTypeScriptで解決します。`calculator.ts`という新しいファイルを作成し、関数の引数と戻り値に「型注釈」を追加してみましょう。

```typescript
// calculator.ts - TypeScriptで「型」の安全性を実現するファイル

// `: number`という型注釈を追加することで、この関数は数値しか受け付けないことを宣言します。
function add(a: number, b: number): number {
    return a + b;
}

function multiply(a: number, b: number): number {
    return a * b;
}

// --- 実行してみる ---
console.log('--- TypeScriptによる型安全デモ ---');
console.log(`add(5, 3) -> ${add(5, 3)}`); // 8 ✅ 正常に動作

// --- コンパイルエラーの体験 ---
// 以下の行のコメントを外してみてください。コードエディタが即座にエラーを警告するはずです。
// console.log(add("5", 3));
//             ~~~
// エラーメッセージ例: Argument of type 'string' is not assignable to parameter of type 'number'.
// (意味: 「文字列型の引数は、数値型のパラメータには渡せません」)
```

**ここでの学び:** TypeScriptの最大の利点は、**実行する前（コンパイル時）に型に関するエラーを発見できる**ことです。`a: number`と書くだけで、`add`関数は数値以外の値を断固として拒否するようになり、JavaScriptで起きたような予期せぬ文字列連結といったバグを未然に防ぐことができます。これにより、私たちは安心してコードを書くことができるのです。

(以降、各プロジェクト・ステップで同様の形式に修正)