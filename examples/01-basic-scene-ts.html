<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Three.js TypeScript Tutorial - 01 Basic Scene</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				margin: 0;
				background-color: #000;
				color: #fff;
				font-family: Monospace;
				font-size: 13px;
				line-height: 24px;
				overscroll-behavior: none;
			}

			#info {
				position: absolute;
				top: 0px;
				width: 100%;
				padding: 10px;
				box-sizing: border-box;
				text-align: center;
				z-index: 1;
				pointer-events: none;
			}

			#controls {
				position: absolute;
				bottom: 10px;
				left: 10px;
				background: rgba(0, 0, 0, 0.7);
				padding: 15px;
				border-radius: 8px;
				pointer-events: auto;
			}

			#controls button {
				background: transparent;
				border: 1px solid #fff;
				color: #fff;
				padding: 8px 12px;
				margin: 4px;
				border-radius: 4px;
				cursor: pointer;
				font-family: monospace;
			}

			#controls button:hover {
				background: rgba(255, 255, 255, 0.1);
			}

			#controls input[type="color"] {
				width: 40px;
				height: 30px;
				border: none;
				border-radius: 4px;
				margin: 4px;
				cursor: pointer;
			}

			.tutorial-title {
				font-size: 16px;
				font-weight: bold;
				margin-bottom: 5px;
				color: #ffff00;
			}

			.tutorial-description {
				font-size: 12px;
				opacity: 0.8;
			}

			.type-info {
				background: rgba(0, 255, 255, 0.1);
				padding: 8px;
				margin: 4px 0;
				border-radius: 4px;
				font-size: 11px;
				border-left: 3px solid #00ffff;
			}
		</style>
	</head>
	<body>
		<div id="info">
			<div class="tutorial-title">Three.js TypeScript Tutorial - 01 Basic Scene</div>
			<div class="tutorial-description">å‹å®‰å…¨ãªåŸºæœ¬ã‚·ãƒ¼ãƒ³ã®å®Ÿè£… - ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ</div>
			<div class="type-info">
				TypeScript Features: å³å¯†ãªå‹ãƒã‚§ãƒƒã‚¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€ã‚¯ãƒ©ã‚¹ã€ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹
			</div>
		</div>

		<div id="controls">
			<div>ğŸ¨ Color: <input type="color" id="colorPicker" value="#00ff00"></div>
			<button id="resetBtn">Reset Position</button>
			<button id="stopBtn">Stop Animation</button>
			<button id="startBtn">Start Animation</button>
		</div>

		<script type="module">
			// Three.jsãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
			import * as THREE from 'three';
			// TypeScriptãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆViteãŒãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ï¼‰
			import { BasicScene } from '../src/basic-scene.ts';

			// å‹å®‰å…¨ãªã‚·ãƒ¼ãƒ³è¨­å®š
			// THREE.Vector3ã¨THREE.Colorã‚’ä½¿ç”¨ã—ã¦ã‚·ãƒ¼ãƒ³ã‚’åˆæœŸåŒ–
			const sceneConfig = {
				camera: {
					fov: 75,
					position: new THREE.Vector3(0, 0, 5)
				},
				renderer: {
					antialias: true,
					alpha: false
				},
				scene: {
					background: new THREE.Color(0x222222)
				}
			};

			// ã‚·ãƒ¼ãƒ³ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ
			const scene = new BasicScene(sceneConfig);
			
			// ã‚·ãƒ¼ãƒ³ã®é–‹å§‹
			scene.start();

			// UI ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã®è¨­å®š
			setupControls(scene);

			/**
			 * UIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã®è¨­å®šï¼ˆå‹å®‰å…¨ï¼‰
			 * @param {BasicScene} sceneInstance - BasicSceneã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
			 */
			function setupControls(sceneInstance) {
				const colorPicker = document.getElementById('colorPicker');
				const resetBtn = document.getElementById('resetBtn');
				const stopBtn = document.getElementById('stopBtn');
				const startBtn = document.getElementById('startBtn');

				// è‰²å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆ
				// ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒã‚§ã‚¤ãƒ‹ãƒ³ã‚°ï¼ˆ?.ï¼‰ã‚’ä½¿ç”¨ã—ã¦nullãƒã‚§ãƒƒã‚¯
				colorPicker?.addEventListener('change', (event) => {
					const target = event.target;
					// å‹ã‚¬ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦HTMLInputElementã‹ç¢ºèª
					if (target instanceof HTMLInputElement) {
						sceneInstance.setCubeColor(target.value);
					}
				});

				// ã‚«ãƒ¡ãƒ©ä½ç½®ãƒªã‚»ãƒƒãƒˆ
				resetBtn?.addEventListener('click', () => {
					sceneInstance.setCameraPosition(0, 0, 5);
				});

				// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡
				stopBtn?.addEventListener('click', () => {
					sceneInstance.stop();
				});

				startBtn?.addEventListener('click', () => {
					sceneInstance.start();
				});
			}

			// ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆãƒšãƒ¼ã‚¸é›¢è„±æ™‚ï¼‰
			window.addEventListener('beforeunload', () => {
				scene.dispose();
			});

			// é–‹ç™ºè€…å‘ã‘æƒ…å ±ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›
			// ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ãƒ„ãƒ¼ãƒ«ã§ã“ã®æƒ…å ±ã‚’ç¢ºèªã§ãã¾ã™
			console.group('ğŸš€ Three.js TypeScript Tutorial - åŸºæœ¬ã‚·ãƒ¼ãƒ³');
			console.log('ğŸ“¦ ä½œæˆã•ã‚ŒãŸã‚·ãƒ¼ãƒ³ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹:', scene);
			console.log('ğŸ¥ ã‚«ãƒ¡ãƒ©ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ:', scene.camera);
			console.log('ğŸ­ 3Dã‚·ãƒ¼ãƒ³:', scene.scene);
			console.log('ğŸ–¥ï¸ ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼:', scene.renderer);
			console.log('ğŸ’¡ TypeScriptã®åˆ©ç‚¹: å‹å®‰å…¨æ€§ã€IntelliSenseã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ”¯æ´');
			console.groupEnd();
		</script>

	</body>
</html>